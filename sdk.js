!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";var n,t="GET_FIELDS",e="FIELDS_UPDATED",a="STATUSES_UPDATED",u="GET_STATUSES",r="SET_INPUT_VALUES",i="READY",o=(n=1,function(){return n++});window.requests={};function s(e){var a=o();return new Promise(function(n){var t;window.requests[a]=n,t=Object.assign({},e,{REQUEST_ID:a}),window.parent.postMessage(t,"*")})}function d(n,t){f[n]=f[n]||[],f[n].push(t)}var f={};window.addEventListener("message",function(t){var n;t.data&&(n=t.data.type,f[n]&&f[n].forEach(function(n){return n(t.data.payload)}),t.data.REQUEST_ID&&(t.data.type,window.requests[t.data.REQUEST_ID](t.data.payload)))},!1),window.AMO_SDK={setInputValues:function(n){return s({type:r,payload:n})},getFields:function(){return s({type:t})},getStatuses:function(){return s({type:u})},subscribe:function(){return{fields:function(n){return d(e,n)},statuses:function(n){return d(a,n)},ready:function(n){return d(i,n)}}}}});
