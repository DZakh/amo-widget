!function(){/* eslint-disable */"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o="object"==typeof n&&n&&n.Object===Object&&n,s="object"==typeof self&&self&&self.Object===Object&&self,c=(o||s||Function("return this")()).Symbol,a=Object.prototype,i=a.hasOwnProperty,u=a.toString,d=c?c.toStringTag:void 0;var l=function(e){var t=i.call(e,d),r=e[d];try{e[d]=void 0;var n=!0}catch(e){}var o=u.call(e);return n&&(t?e[d]=r:delete e[d]),o},b=Object.prototype.toString;var f=function(e){return b.call(e)},p=c?c.toStringTag:void 0;var y=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?l(e):f(e)};var j=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var O=function(e){if(!j(e))return!1;var t=y(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const v={ready:"ready",destroy:"destroy","update:sb-fields":"update:sb-fields","update:sb-statuses":"update:sb-statuses"},w={"sb-fields":"sb-fields","sb-statuses":"sb-statuses"};window.Amo=()=>{let e=0;const t={},n=Object.values(v).reduce((e,t)=>r(r({},e),{},{[t]:new Set}),{}),o=e=>{window.parent.postMessage(e,"*")};return window.addEventListener("message",e=>{if(!e.data)return;const r=e.data,o=r.method,s=r.payload;switch(!0){case!!n[o]:{const e=n[o];e&&e.forEach(e=>{e(s)});break}case"response"===o:{const e=s.requestIdx,r=s.data;t[e](r),delete t[e];break}}}),o({method:v.ready}),{on:(e,t)=>{const r=n[e];r&&O(t)&&r.add(t)},off:(e,t)=>{const r=n[e];r&&r.delete(t)},request:r=>w[r]?new Promise(n=>{t[e]=n,o({method:"request",payload:{requestIdx:e,entity:r}}),e+=1}):Promise.resolve({error:"Unexpected requested entity."})}}}();
